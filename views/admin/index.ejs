<%- include ("../partials/header.ejs")%>
<title>Administração</title>
</head>
<body>
<div class="container">
  <h1>Administração</h1>
  <a href="/procedimento/new" class="btn btn-primary">Cadastrar Procedimento</a>
  <a href="/consulta/new" class="btn btn-primary">Marque Consulta</a>
  <a href="/agenda" class="btn btn-primary">Listar Agenda</a>
  <a href="/recebimento" class="btn btn-primary">Recebimentos</a>
  <table class="table">
    <h4>Consultas</h4>
    <thead>
      <tr>
        <th scope="col">Valor</th>
        <th scope="col">Data</th>
        <th scope="col">Paciente</th>
        <th scope="col">Dentista</th>
        <th scope="col">Procedimento</th>
        <th scope="col">Ação</th>
      </tr>
    </thead>
    <tbody>
      <% consultas.forEach(consulta => { %>
      <tr>
        <td><%- consulta.valor %></td>
        <td><%- consulta.data %></td>
        <td><%- consulta.paciente.nome %></td>
        <td><%- consulta.dentistum.nome %></td>
        <td><%- consulta.procedimentos[0].nome %></td>
        <td></td>
        <td>
          <a href="/consulta/edit/<%- consulta.id%>" class="btn btn-dark"
            >Editar</a
          >
          <a href="/consulta/delete/<%- consulta.id%>" class="btn btn-danger"
            >Deletar</a
          >
        </td>
      </tr>

      <% })%>
    </tbody>
  </table>

  <table class="table">
    <h4>Dentistas</h4>
    <thead>
      <tr>
        <th scope="col">Nome</th>
        <th scope="col">CPF</th>
        <th scope="col">Especialidade</th>
      </tr>
    </thead>

    <tbody>
      <% dentistas.forEach(dentista => { %>
      <tr>
        <td><%- dentista.nome %></td>
        <td><%- dentista.cpf %></td>
        <td><%- dentista.especialidade %></td>
      </tr>
      <% })%>
    </tbody>
  </table>

  <table class="table">
    <h4>Pacientes</h4>
    <thead>
      <tr>
        <th scope="col">Nome</th>
        <th scope="col">CPF</th>
        <th scope="col">Telefone</th>
        <th scope="col">Email</th>
      </tr>
    </thead>

    <tbody>
      <% pacientes.forEach(paciente => { %>
      <tr>
        <td><%- paciente.nome %></td>
        <td><%- paciente.cpf %></td>
        <td><%- paciente.telefone %></td>
        <td><%- paciente.email %></td>
      </tr>
      <% })%>
    </tbody>


    <table class="table">
      <h4>Procedimentos</h4>
      <thead>
        <tr>
          <th scope="col">Nome</th>
          <th scope="col">Materiais</th>
          <th scope="col">Valor</th>
        </tr>
      </thead>
  
      <tbody>
        <% procedimentos.forEach(procedimento => { %>
        <tr>
          <td><%- procedimento.nome %></td>
          <td><%- procedimento.materiais %></td>
          <td><%- procedimento.valor %></td>
        </tr>
        <% })%>
      </tbody>
  </table>
</div>
<%- include ("../partials/footer.ejs")%>
